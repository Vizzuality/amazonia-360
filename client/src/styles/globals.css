@import "tailwindcss";
@import "tw-animate-css";

@plugin "@tailwindcss/typography";

@custom-variant dark (&:is(.dark *));
@custom-variant tall (@media (min-height: 800px));

/*
  The default border color has changed to `currentcolor` in Tailwind CSS v4,
  so we've added these compatibility styles to make sure everything still
  looks the same as it did with Tailwind CSS v3.

  If we ever want to remove these styles, we need to add an explicit border
  color utility to any element that depends on these defaults.
*/
@layer base {
  *,
  ::after,
  ::before,
  ::backdrop,
  ::file-selector-button {
    border-color: var(--color-gray-200, currentcolor);
  }
}

/* Breakpoints — must use rem (same unit as Tailwind defaults) for correct cascade ordering.
   Only override values that differ from defaults (sm:40rem, md:48rem, lg:64rem are kept). */
@theme {
  --breakpoint-xl: 78.75rem;  /* 1260px */
  --breakpoint-2xl: 103.75rem; /* 1660px */
  --breakpoint-3xl: 118.75rem; /* 1900px */
}

@theme {
  /* Font: use Montserrat (set via Next.js CSS variable) as the default sans font.
     Must NOT be inline so the var(--montserrat) reference is preserved at runtime. */
  --font-sans: var(--montserrat), ui-sans-serif, system-ui, sans-serif,
    "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji";
}

@theme inline {
  /* Colors: Blue */
  --color-blue-50: #f0f4f6;
  --color-blue-100: #cbd8df;
  --color-blue-200: #94b4c4;
  --color-blue-300: #5e90a8;
  --color-blue-400: #196e8c;
  --color-blue-500: #004e70;
  --color-blue-600: #003e5a;
  --color-blue-700: #00374e;
  --color-blue-800: #002f43;
  --color-blue-900: #002738;

  /* Colors: Cyan */
  --color-cyan-100: #dbedf8;
  --color-cyan-200: #b7dbf2;
  --color-cyan-300: #93caeb;
  --color-cyan-400: #6fb8e5;
  --color-cyan-500: #009ade;
  --color-cyan-600: #4ba6de;
  --color-cyan-700: #35749b;
  --color-cyan-800: #2d6485;
  --color-cyan-900: #26536f;

  /* Colors: Gray */
  --color-gray-100: #f2f2f2;
  --color-gray-200: #b3b3b3;
  --color-gray-300: #858585;
  --color-gray-400: #585858;
  --color-gray-500: #3b3b3b;
  --color-gray-600: #303030;
  --color-gray-700: #282828;
  --color-gray-800: #242424;
  --color-gray-900: #1e1e1e;

  /* Colors: Viridis */
  --color-viridis-100: #fde724;
  --color-viridis-200: #b6de2b;
  --color-viridis-300: #6cce5a;
  --color-viridis-400: #1f9d8a;
  --color-viridis-500: #26838f;
  --color-viridis-600: #31688e;
  --color-viridis-700: #3e4a89;
  --color-viridis-800: #482576;
  --color-viridis-900: #440154;

  /* Colors: Semantic (shadcn) */
  --color-border: hsl(var(--border));
  --color-input: hsl(var(--input));
  --color-ring: hsl(var(--ring));
  --color-background: hsl(var(--background));
  --color-foreground: hsl(var(--foreground));

  --color-primary: hsl(var(--primary));
  --color-primary-foreground: hsl(var(--primary-foreground));

  --color-secondary: hsl(var(--secondary));
  --color-secondary-foreground: hsl(var(--secondary-foreground));

  --color-destructive: hsl(var(--destructive));
  --color-destructive-foreground: hsl(var(--destructive-foreground));

  --color-muted: hsl(var(--muted));
  --color-muted-foreground: hsl(var(--muted-foreground));

  --color-accent: hsl(var(--accent));
  --color-accent-foreground: hsl(var(--accent-foreground));

  --color-popover: hsl(var(--popover));
  --color-popover-foreground: hsl(var(--popover-foreground));

  --color-card: hsl(var(--card));
  --color-card-foreground: hsl(var(--card-foreground));

  /* Colors: Sidebar */
  --color-sidebar: hsl(var(--sidebar-background));
  --color-sidebar-foreground: hsl(var(--sidebar-foreground));
  --color-sidebar-primary: hsl(var(--sidebar-primary));
  --color-sidebar-primary-foreground: hsl(var(--sidebar-primary-foreground));
  --color-sidebar-accent: hsl(var(--sidebar-accent));
  --color-sidebar-accent-foreground: hsl(var(--sidebar-accent-foreground));
  --color-sidebar-border: hsl(var(--sidebar-border));
  --color-sidebar-ring: hsl(var(--sidebar-ring));

  /* Border Radius */
  --radius-lg: var(--radius);
  --radius-md: calc(var(--radius) - 2px);
  --radius-sm: calc(var(--radius) - 4px);

  /* Font Size */
  --text-2xs: 0.625rem;
  --text-2xs--line-height: 0.75rem;
  --text-4xl: 2.5rem;
  --text-4xl--line-height: 3rem;

  /* Letter Spacing */
  --tracking-wide-lg: 0.7px;

  /* Width */
  --width-popover-width: var(--radix-popover-trigger-width);

  /* Height */
  --height-popover-height: var(--radix-popover-trigger-height);


  /* Keyframes */
  --animate-accordion-down: accordion-down 0.2s ease-out;
  --animate-accordion-up: accordion-up 0.2s ease-out;
  --animate-left-to-right: left-to-right 0.8s ease-out;
  --animate-right-to-left: right-to-left 0.8s ease-out;
  --animate-slide-up: slideUp 1s ease-in forwards;
  --animate-slide-down: slideDown 1s ease-in forwards;
  --animate-zoom-out: zoomOut 1.5s ease-in-out;
  --animate-growWidth: growWidth 1s ease-out forwards;
  --animate-right-bottom-to-left-top: rightBottomToLeftTop 0.8s ease-in-out forwards;
  --animate-half-right-bottom-to-left-top: halfRightBottomToLeftTop 0.8s
    cubic-bezier(0.25, 0.1, 0.25, 1) 0.1s forwards;
}

@keyframes accordion-down {
  from {
    height: 0;
  }
  to {
    height: var(--radix-accordion-content-height);
  }
}

@keyframes accordion-up {
  from {
    height: var(--radix-accordion-content-height);
  }
  to {
    height: 0;
  }
}

@keyframes growWidth {
  0% {
    width: 0;
    opacity: 0.5;
  }
  100% {
    width: 100%;
    opacity: 1;
  }
}

@keyframes left-to-right {
  from {
    opacity: 0;
    transform: translateX(-100%);
  }
  to {
    opacity: 1;
    transform: translateX(0);
  }
}

@keyframes right-to-left {
  from {
    opacity: 0;
    transform: translateX(100%);
  }
  to {
    opacity: 1;
    transform: translateX(0);
  }
}

@keyframes slideUp {
  0% {
    transform: translateY(300px);
    opacity: 0;
  }
  50% {
    transform: translateY(-150px);
    opacity: 0;
  }
  100% {
    transform: translateY(0);
    opacity: 1;
  }
}

@keyframes slideDown {
  0% {
    transform: translateY(-300px);
    opacity: 0;
  }
  100% {
    transform: translateY(0);
    opacity: 1;
  }
}

@keyframes zoomOut {
  0% {
    transform: scale(1.5);
  }
  100% {
    transform: scale(1);
  }
}

@keyframes rightBottomToLeftTop {
  0% {
    transform: translate(300px, 300px);
    opacity: 0;
  }
  100% {
    transform: translate(0, 0);
    opacity: 1;
  }
}

@keyframes halfRightBottomToLeftTop {
  0% {
    transform: translate(300px, 300px);
    opacity: 0;
  }
  100% {
    transform: translate(0, 0);
    opacity: 1;
  }
}

@keyframes outline-in {
  100% {
    outline-color: transparent;
  }
}

/* Container utility — replaces the built-in (disabled via @source not inline("container"))
   to match the v3 container config with center: true + responsive padding. */
@utility container {
  width: 100%;
  margin-inline: auto;
  padding-inline: 1rem;
}

@media (width >= theme(--breakpoint-sm)) {
  .container {
    max-width: theme(--breakpoint-sm);
  }
}
@media (width >= theme(--breakpoint-md)) {
  .container {
    max-width: theme(--breakpoint-md);
  }
}
@media (width >= theme(--breakpoint-lg)) {
  .container {
    max-width: theme(--breakpoint-lg);
    padding-inline: 2rem;
  }
}
@media (width >= theme(--breakpoint-xl)) {
  .container {
    max-width: theme(--breakpoint-xl);
  }
}
@media (width >= theme(--breakpoint-2xl)) {
  .container {
    max-width: theme(--breakpoint-2xl);
    padding-inline: 4rem;
  }
}
@media (width >= theme(--breakpoint-3xl)) {
  .container {
    max-width: theme(--breakpoint-3xl);
    padding-inline: 6rem;
  }
}

/* Custom utility: bg-viridis gradient (was backgroundImage.viridis in v3 config) */
@utility bg-viridis {
  background-image: linear-gradient(
    to right,
    #440154,
    #482576,
    #3e4a89,
    #31688e,
    #26838f,
    #1f9d8a,
    #6cce5a,
    #b6de2b,
    #fde724
  );
}

/* Custom utility: animate-outline-in */
@utility animate-outline-in {
  border-radius: var(--radius-2xl, 1rem);
  outline-width: 2px;
  outline-color: hsl(var(--primary));
  animation: outline-in 1s ease-in forwards;
}

/* CSS Variables */
:root {
  /* Amazonia */
  /* colors */
  --accent: 201 24% 84%;
  --accent-foreground: 198 100% 22%;
  --background: 0 0 100%;
  --border: 201 24% 84%;
  --card: 0 0 100%;
  --destructive: 0 84% 60%;
  --destructive-foreground: 0 0% 100%;
  --foreground: 198 100% 11%;
  --hover-destructive: 0 72% 51%;
  --hover-primary: 198 100% 15%;
  --hover-secondary: 200 29% 67%;
  --input: 201 24% 84%;
  --muted: 200 25% 95%;
  --muted-foreground: 51 4% 36%;
  --popover: 0 0 100%;
  --popover-foreground: 0 0 12%;
  --primary: 198 100% 22%;
  --primary-foreground: 200 25% 95%;
  --ring: 198 100% 22%;
  --secondary: 200 25% 95%;
  --secondary-foreground: 198 100% 15%;
  /* numbers */
  --radius: 0.5rem;
}

/* Base styles */
@layer base {
  body {
    @apply bg-background text-foreground leading-relaxed font-semibold antialiased;
  }

  .same-trigger-size {
    width: var(--radix-popover-trigger-width);
    max-height: var(--radix-popover-content-available-height);
  }

  .mdx-editor {
    font-family: var(--montserrat);
    font-weight: 500;
    @apply prose prose-base xl:prose-lg 2xl:prose-xl prose-a:wrap-break-word;
    max-width: none;

    --baseBg: var(--muted-foreground);
  }
  .mdx-editor-toolbar {
    padding: 3px 0;
    margin: 0 -4px;
    @apply border-border inline-flex rounded-xs border;
  }

  .mdx-editor-toolbar svg {
    @apply size-9 p-1.5;
  }

  .mdx-editor-content {
    padding: 0;
  }
}

@layer base {
  .map .esri-view-surface:focus::after {
    outline: none !important;
  }

  .map .esri-widget {
    font-family: var(--montserrat);
  }

  .map .esri-popup--is-docked {
    @apply m-4;
  }

  .map .esri-popup.esri-popup--shadow {
    @apply rounded-lg shadow-xs;
  }

  .map .esri-popup__main-container {
    @apply rounded-lg border border-blue-100 shadow-xs;
  }
  .map .esri-popup--is-docked .esri-popup__main-container {
    max-width: calc(50% - 2rem);
  }

  .map .esri-feature__content-element {
    @apply p-0;
  }

  .map .header-content {
    @apply px-4 py-2;
  }

  .map h2.esri-widget__heading {
    @apply text-sm font-semibold;
  }

  /*
    TABLE
  */
  .map .esri-widget__table tr {
    @apply pt-1;
  }

  .map .esri-widget__table tr:nth-child(odd) {
    background-color: hsl(var(--background));
  }

  .map .esri-widget__table tr:nth-child(even) {
    background-color: hsl(var(--background));
  }

  .map .esri-widget__table tr th,
  .map .esri-widget__table tr td {
    @apply text-2xs p-0.5;
  }

  .map .esri-widget__table tr th {
    @apply font-semibold;
  }

  .map .esri-widget__table tr td {
    @apply pl-2;
  }
}

@layer base {
  @media print {
    body {
      print-color-adjust: exact;
    }

    @page {
      size: landscape letter;
      margin: 0;
      padding: 0;
    }
  }
}

/* Cursor pointer for buttons (Tailwind v4 changed default to cursor: default) */
@layer base {
  button:not(:disabled),
  [role="button"]:not(:disabled) {
    cursor: pointer;
  }
}

.react-grid-placeholder {
  border-radius: 16px;
  border: 1px dashed #000;
  pointer-events: none;
  background-color: blueviolet;
}

.react-resizable-handle::after {
  background: transparent !important;
  border: none !important;
}

.react-resizable-handle {
  background-image: none !important;
}
