version: '3.7'
services:
  api:
    build:
        context: ./api
        dockerfile: Dockerfile
    ports:
      - "8000:8000"
    env_file:
      - .env
    networks:
      - amazonia360-network
    restart:
        always

  test:
    build:
        context: ./api
        dockerfile: Dockerfile
    env_file:
      - .env.test
    networks:
      - amazonia360-network

    command: pytest tests
networks:
  amazonia360-network:
    driver: bridge
